version: '3.8'
services:
  guacamole:
    image: flcontainers/guacamole
    restart: unless-stopped
    environment:
      PUID: 1000
      PGID: 1000
      TZ: Europe/London
      EXTENSIONS: 'auth-totp,auth-ldap,auth-sso-openid'
      OPENID_AUTHORIZATION_ENDPOINT: https://auth.hyvecloud.dev/application/o/authorize/
      OPENID_CLIENT_ID: ${ CLIENT_ID }
      OPENID_ISSUER: https://auth.hyvecloud.dev/application/o/guacamole/
      OPENID_JWKS_ENDPOINT: https://auth.hyvecloud.dev/application/o/guacamole/jwks/
      OPENID_REDIRECT_URI: https://guacamole.hyvecloud.dev/
    volumes:
      - /mnt/gluster/containers/guacamole:/config
      - /etc/localtime:/etc/localtime:ro
    ports:
    - 8282:8080
